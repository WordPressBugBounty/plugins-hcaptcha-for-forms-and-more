(()=>{var e=function(e){e("#hcaptcha-export-btn").on("click",function(a){a.preventDefault();var t=e(this),s=e("#include_keys").is(":checked")?"on":"";t.prop("disabled",!0),hCaptchaSettingsBase.clearMessage(),e.ajax({url:HCaptchaToolsObject.ajaxUrl,type:"POST",data:{action:HCaptchaToolsObject.exportAction,nonce:HCaptchaToolsObject.exportNonce,include_keys:s},success:function(e){if(e&&!1!==e.success){var a=JSON.stringify(e,null,4),t=new Blob([a],{type:"application/json"}),s=window.URL.createObjectURL(t),c=document.createElement("a"),o=(new Date).toISOString().slice(0,10);c.href=s,c.download="hcaptcha-settings-"+o+".json",document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(s),document.body.removeChild(c)}else{var n=e.data&&e.data.message?e.data.message:HCaptchaToolsObject.exportFailed;hCaptchaSettingsBase.showErrorMessage(n)}},error:function(){hCaptchaSettingsBase.showErrorMessage(HCaptchaToolsObject.exportFailed)},complete:function(){t.prop("disabled",!1)}})}),e("#hcaptcha-import-btn").on("click",function(a){a.preventDefault();var t=e("#hcaptcha-import-file"),s=t[0].files[0];if(s){var c=new FormData;c.append("action",HCaptchaToolsObject.importAction),c.append("nonce",HCaptchaToolsObject.importNonce),c.append("import_file",s);var o=e(this);o.prop("disabled",!0),hCaptchaSettingsBase.clearMessage(),e.ajax({url:HCaptchaToolsObject.ajaxUrl,type:"POST",data:c,processData:!1,contentType:!1,success:function(e){if(e.success)hCaptchaSettingsBase.showSuccessMessage(e.data.message);else{var a=e.data&&e.data.message?e.data.message:HCaptchaToolsObject.importFailed;hCaptchaSettingsBase.showErrorMessage(a)}},error:function(){hCaptchaSettingsBase.showErrorMessage(HCaptchaToolsObject.importFailed)},complete:function(){o.prop("disabled",!1),t.val("")}})}else hCaptchaSettingsBase.showErrorMessage(HCaptchaToolsObject.selectJsonFile)});var a=e("#hcaptcha-import-file"),t=e(".hcaptcha-file-name");a.on("change",function(){this.files&&this.files.length>0?(t.text(this.files[0].name),t.addClass("is-selected")):(t.text(t.data("empty")),t.removeClass("is-selected"))})};window.hCaptchaTools=e,jQuery(document).ready(e)})();